<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- Core plugin JavaScript-->

<script src="{{ asset('vendor/jquery-easing/jquery.easing.min.js') }}"></script>
<script src="{{ asset('vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>

<!-- Core plugin JavaScript-->
<script src="{{ asset('vendor/jquery-easing/jquery.easing.min.js') }}"></script>

<!-- Custom scripts for all pages-->
<script src="{{ asset('js/sb-admin-2.min.js') }}"></script>
<script src="../vendor/jquery/jquery.min.js"></script>

<!-- Page level plugins -->
<script src="../vendor/chart.js/Chart.min.js"></script>

<!-- Page level custom scripts -->
<script src="../js/demo/chart-area-demo.js"></script>
<script src="../js/demo/chart-pie-demo.js"></script>

<script>
$(document).ready(function() {

    let store = true;
    const token = localStorage.getItem("token");

    if(token !== ""){

        $.ajax({
            type: "POST", 
            url: "/profile/show", 
            data: JSON.stringify({
                "token": token,
            }),
            dataType: 'json',
            async: true,
            success: function(response) {

                if(response != undefined){
                   $('#myname').html(response.user[0].username);
                    $('#logo-setting').attr('src', response.user[0].avatar);
                }
                console.log(response);
                
            },
            error: function (err) {
                
                console.log(err);
            }
        });
    }else{
        store = false;
        localStorage.removeItem('token');

         window.location.href = '/';

        console.log("Vous êtes deconnecté");
    }

    $('#deconnecter').click(function(e){
        
        if(token !== null){

            store = false;
            localStorage.removeItem('token');
            console.log("Vous êtes deconnecté");
        }
        
    });
 
});
 </script>
