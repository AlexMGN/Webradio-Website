<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- Core plugin JavaScript-->
<script src="{{ asset('vendor/jquery-easing/jquery.easing.min.js') }}"></script>
<script src="{{ asset('vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>

<!-- Core plugin JavaScript-->
<script src="{{ asset('vendor/jquery-easing/jquery.easing.min.js') }}"></script>

<!-- Custom scripts for all pages-->
<script src="{{ asset('js/sb-admin-2.min.js') }}"></script>
<script src="{{ asset('js/mainJs/index.js') }}"></script>

<script>
    
    
    /*function playPause1 () {

        if(track.paused) {

            track.play();
            $("#play-pause1").addClass('pause');
        }else {
            track.pause();
            $("#play-pause1").removeClass('pause');
        }
    } 

     $('#play-pause1').click(function() {
        playPause1();
    }); //play1

    function playPause2 () {

        if(track.paused) {

            track.play();
            $("#play-pause2").addClass('pause');
        }else {
            track.pause();
            $("#play-pause2").removeClass('pause');
        }
    } 

     $('#play-pause2').click(function(e) {
        playPause2();
    }); //play2

    function playPause3 () {

        if(track.paused) {

            track.play();
            $("#play-pause3").addClass('pause');
        }else {
            track.pause();
            $("#play-pause3").removeClass('pause');
        }
    } 

     $('#play-pause3').click(function(e) {
         console.log("play3");
        playPause3();
    }); //play3 */


$(document).ready(function() {

    let store = true;
    const token = localStorage.getItem("token");

    

    if(token !== ""){

        $.ajax({
            type: "POST", 
            url: "/radios/show", 
            data: JSON.stringify({
                "token": token,
            }),
            dataType: 'json',
            async: true,
            success: function(response) {

                if(response != undefined){
                    /*$('#myname').html(response.user[0].username);
                    $('#logo-setting').attr('src', user.user[0].avatar);*/

                     myradio = response.radios[0];
                      let mytab;

                    for(let i=0; i<4; i++) {

                        mytab += "<tr><td><img class='img-radio' src='"+response.radios[i].logo+"' alt=''></td><td style='color: black;'>"+response.radios[i].radio_name+"</td><td><audio class='myaudio' id='track'><source src='"+response.radios[i].Stream.direct_url+"' type='audio/mp3' />Rien</audio><div id='player-container'><div id='play-pause"+i+"' class='play'>Play</div></div></td></tr>";
                        
                    }
                    $("#list-radio").html(mytab);

                }
                console.log(response);
               
                
            },
            error: function (err) {
                
                console.log(err);
            }
        });
    }else{
    
        store = false;
        localStorage.removeItem('token');

         window.location.href = '/';

        console.log("Vous êtes deconnecté");
    }

    let track =  document.getElementById("track");

    function playPause0 () {

        if(track.paused) {

            track.play();
            $("#play-pause0").addClass('pause');
        }else {
            track.pause();
            $("#play-pause0").removeClass('pause');
        }
    } 

     $('#play-pause0').click(function() {
        playPause0();
    }); //play0
});
</script>